<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Kingdom 3584 KvK Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>âš™ï¸ Admin Panel</h1>
            <p>Kingdom 3584 â€¢ Data Management</p>
            <a href="index.html" class="back-link">â† Back to Dashboard</a>
        </header>

        <!-- Season Management -->
        <section class="admin-section">
            <h2>ğŸ† Season Management</h2>
            <div id="season-management" class="season-management">
                <div class="loading">Loading seasons...</div>
            </div>
        </section>

        <!-- Player Classification -->
        <section class="admin-section">
            <h2>ğŸ‘¥ Player Classification & Farm Linking</h2>
            <div id="player-classification" class="player-classification">
                <div class="loading">Loading players...</div>
            </div>
        </section>

        <!-- Data Status -->
        <section class="admin-section">
            <h2>ğŸ“Š Data Status</h2>
            <div id="data-status" class="data-status">
                <div class="loading">Checking data status...</div>
            </div>
        </section>

        <!-- Baseline Upload -->
        <section class="admin-section">
            <h2>ğŸ“ Upload Baseline (Start of KvK)</h2>
            <p class="section-desc">Upload this ONCE at the start of KvK. This is the reference point for all comparisons.</p>
            <p class="section-desc" style="color: #10b981; font-size: 0.9rem;">âœ¨ Now supports direct Excel (.xlsx) upload from Hero Scrolls!</p>

            <form id="baseline-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="baseline-file">Select File (CSV or Excel)</label>
                        <input type="file" id="baseline-file" accept=".csv,.xlsx,.xls">
                    </div>
                    <div class="form-group">
                        <label for="baseline-season">KvK Season ID</label>
                        <input type="text" id="baseline-season" value="season_1">
                    </div>
                </div>
                <button type="submit" class="upload-btn baseline-btn">
                    ğŸ“ Upload Baseline
                </button>
            </form>
            <div id="baseline-message"></div>
        </section>

        <!-- Current Data Upload -->
        <section class="admin-section">
            <h2>ğŸ“¤ Upload Current Data (After Each Fight)</h2>
            <p class="section-desc">Upload this after each fight to update the leaderboard. Deltas will be calculated from baseline.</p>
            <p class="section-desc" style="color: #10b981; font-size: 0.9rem;">âœ¨ Now supports direct Excel (.xlsx) upload from Hero Scrolls!</p>

            <form id="current-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="current-file">Select File (CSV or Excel)</label>
                        <input type="file" id="current-file" accept=".csv,.xlsx,.xls">
                    </div>
                    <div class="form-group">
                        <label for="current-season">KvK Season ID</label>
                        <input type="text" id="current-season" value="season_1">
                    </div>
                </div>
                <div class="form-group">
                    <label for="description">Description (e.g., "After Pass 4 Fight")</label>
                    <input type="text" id="description" placeholder="After Pass 4 Fight">
                </div>
                <button type="submit" class="upload-btn current-btn">
                    ğŸ“¤ Upload Current Data
                </button>
            </form>
            <div id="current-message"></div>
        </section>

        <!-- File Management -->
        <section class="admin-section">
            <h2>ğŸ“ File Management</h2>
            <p class="section-desc">View and manage all uploaded files. You can delete individual entries here.</p>

            <!-- Baseline Files Table -->
            <div class="file-management-section">
                <h3>ğŸ¯ Baseline Data</h3>
                <div id="baseline-files-table" class="files-table">
                    <div class="loading">Loading baseline files...</div>
                </div>
            </div>

            <!-- Current Data Files Table -->
            <div class="file-management-section" style="margin-top: 30px;">
                <h3>ğŸ“Š Current Data / History</h3>
                <div id="history-files-table" class="files-table">
                    <div class="loading">Loading history files...</div>
                </div>
            </div>
        </section>

        <!-- Upload History (Keep for backward compatibility) -->
        <section class="admin-section" style="display: none;">
            <h2>ğŸ“œ Upload History</h2>
            <p class="section-desc">All data uploads for this KvK season.</p>
            <div id="history-list" class="history-list">
                <div class="loading">Loading history...</div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Admin Panel â€¢ Kingdom 3584 â€¢ ML-Powered Data Processing</p>
        </footer>
    </div>

    <script src="admin.js"></script>
</body>
</html>